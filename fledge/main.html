<html>
  <body>
    <script>
      let NUM_AUCTIONS = 1000;
      let params = new URLSearchParams('?'+window.location.hash.substring(1));
      if (params.has("numAuctions")) {
        NUM_AUCTIONS = params.get("numAuctions");
      }
      for (idx = 0; idx < NUM_AUCTIONS; idx++) {
        let myidx = idx;
        navigator.runAdAuction({
          seller: 'https://brusshamilton.github.io',
          decisionLogicUrl: 'https://brusshamilton.github.io/scraps/fledge/decisionLogic.js',
          interestGroupBuyers: ['https://brusshamilton.github.io'],
        }).then((urn)=>{
          let divElement = document.createElement('div');
          divElement.innerText = `Auction ${myidx}`
          let ffElement = document.createElement('fencedFrame');
          ffElement.config = urn;
          divElement.appendChild(ffElement);
          document.body.appendChild(divElement);
        }, (error)=> {
          console.log(`auction ${myidx} failed: ${error}`);
        });
      }
    </script>
  </body>
</html>
